{"version":3,"sources":["../../src/utils/page-data.js"],"names":["fs","require","path","getFilePath","publicDir","pagePath","fixedPagePath","join","read","filePath","rawPageData","readFile","JSON","parse","write","page","result","body","componentChunkName","matchPath","outputFile","stringify","module","exports"],"mappings":";;AAAA,MAAMA,EAAE,GAAGC,OAAO,CAAE,UAAF,CAAlB;;AACA,MAAMC,IAAI,GAAGD,OAAO,CAAE,MAAF,CAApB;;AAEA,MAAME,WAAW,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,EAAgBC,QAAhB,KAA6B;AAC/C,QAAMC,aAAa,GAAGD,QAAQ,KAAM,GAAd,GAAoB,OAApB,GAA6BA,QAAnD;AACA,SAAOH,IAAI,CAACK,IAAL,CAAUH,SAAV,EAAsB,WAAtB,EAAkCE,aAAlC,EAAkD,gBAAlD,CAAP;AACD,CAHD;;AAIA,MAAME,IAAI,GAAG,OAAO;AAAEJ,EAAAA;AAAF,CAAP,EAAsBC,QAAtB,KAAmC;AAC9C,QAAMI,QAAQ,GAAGN,WAAW,CAAC;AAAEC,IAAAA;AAAF,GAAD,EAAgBC,QAAhB,CAA5B;AACA,QAAMK,WAAW,GAAG,MAAMV,EAAE,CAACW,QAAH,CAAYF,QAAZ,EAAuB,OAAvB,CAA1B;AACA,SAAOG,IAAI,CAACC,KAAL,CAAWH,WAAX,CAAP;AACD,CAJD;;AAMA,MAAMI,KAAK,GAAG,OAAO;AAAEV,EAAAA;AAAF,CAAP,EAAsBW,IAAtB,EAA4BC,MAA5B,KAAuC;AACnD,QAAMP,QAAQ,GAAGN,WAAW,CAAC;AAAEC,IAAAA;AAAF,GAAD,EAAgBW,IAAI,CAACb,IAArB,CAA5B;AACA,QAAMe,IAAI,GAAG;AACXC,IAAAA,kBAAkB,EAAEH,IAAI,CAACG,kBADd;AAEXhB,IAAAA,IAAI,EAAEa,IAAI,CAACb,IAFA;AAGXiB,IAAAA,SAAS,EAAEJ,IAAI,CAACI,SAHL;AAIXH,IAAAA;AAJW,GAAb;AAMA,QAAMhB,EAAE,CAACoB,UAAH,CAAcX,QAAd,EAAwBG,IAAI,CAACS,SAAL,CAAeJ,IAAf,CAAxB,CAAN;AACD,CATD;;AAWAK,MAAM,CAACC,OAAP,GAAiB;AACff,EAAAA,IADe;AAEfM,EAAAA;AAFe,CAAjB","sourcesContent":["const fs = require(`fs-extra`)\nconst path = require(`path`)\n\nconst getFilePath = ({ publicDir }, pagePath) => {\n  const fixedPagePath = pagePath === `/` ? `index` : pagePath\n  return path.join(publicDir, `page-data`, fixedPagePath, `page-data.json`)\n}\nconst read = async ({ publicDir }, pagePath) => {\n  const filePath = getFilePath({ publicDir }, pagePath)\n  const rawPageData = await fs.readFile(filePath, `utf-8`)\n  return JSON.parse(rawPageData)\n}\n\nconst write = async ({ publicDir }, page, result) => {\n  const filePath = getFilePath({ publicDir }, page.path)\n  const body = {\n    componentChunkName: page.componentChunkName,\n    path: page.path,\n    matchPath: page.matchPath,\n    result,\n  }\n  await fs.outputFile(filePath, JSON.stringify(body))\n}\n\nmodule.exports = {\n  read,\n  write,\n}\n"],"file":"page-data.js"}